



现在修改 [models/TimeLLM.py](cci:7://file:///home/dmx_MT/LZF/project/CAST/models/TimeLLM.py:0:0-0:0)：



验证修改：

修改完成！现在 **3 个模块可以独立开启或关闭**。

## 命令行参数

| 参数 | 默认 | 说明 | 依赖 |
|------|------|------|------|
| `--use_swt_decompose` | `False` | 启用 SWT 分解 | 无 |
| `--use_freq_type_emb` | `False` | 启用频带类型嵌入 | 需要 `swt_decompose` |
| `--use_freq_reconstruct` | `False` | 启用可学习重构 | 需要 `swt_decompose` |
| `--swt_wavelet` | `db4` | 小波类型 | - |
| `--swt_level` | `1` | 分解层数 | - |

## 使用示例

```bash
# 1. 基线 (不启用任何新模块)
accelerate launch run_main.py ... --model_comment baseline

# 2. 仅启用 SWT 分解 (输出用 mean 聚合)
accelerate launch run_main.py ... --use_swt_decompose --model_comment swt_only

# 3. SWT 分解 + 频带类型嵌入
accelerate launch run_main.py ... --use_swt_decompose --use_freq_type_emb --model_comment swt_type

# 4. SWT 分解 + 可学习重构
accelerate launch run_main.py ... --use_swt_decompose --use_freq_reconstruct --model_comment swt_recon

# 5. 全部启用 (完整方案)
accelerate launch run_main.py ... \
    --use_swt_decompose \
    --use_freq_type_emb \
    --use_freq_reconstruct \
    --model_comment full_swt
```

## 消融实验组合

| 组合 | swt_decompose | freq_type_emb | freq_reconstruct | 说明 |
|------|:---:|:---:|:---:|------|
| Baseline | ✗ | ✗ | ✗ | 原始 TimeLLM |
| +SWT | ✓ | ✗ | ✗ | 仅分解，mean聚合 |
| +SWT+Type | ✓ | ✓ | ✗ | 分解+类型嵌入 |
| +SWT+Recon | ✓ | ✗ | ✓ | 分解+可学习重构 |
| **Full** | ✓ | ✓ | ✓ | **完整方案** |